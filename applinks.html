<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="Hapag-Lloyd"/>
		<meta property="al:android:package" content="com.hlag.fit"/>
		<meta property="al:android:class" content="com.hlag.fit.ui.RedirectActivity"/>
		<meta name="twitter:card" content="app">
		<meta name="twitter:site" content="@HapagLloydAG">
		<meta name="twitter:app:name:iphone" content="Hapag-Lloyd">
		<meta name="twitter:app:id:iphone" content="935668102">
		<meta name="twitter:app:url:iphone" content="hapaglloyd://hlmobapps">
	</head>
	<body>
		<script>
			var protocolToReplace = "http:";
			String.prototype.format = String.prototype.f = function() {
				var args = arguments;
				return this.replace(/\{(\d+)}/g, function(m,n) {
					return args[n] ? args[n] : m;
				});
			};
			function iOSVersion() {
				var match = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/),
					version = [
						parseInt(match[1], 10),
						parseInt(match[2], 10),
						parseInt(match[3] || 0, 10)
					];
				return parseFloat(version.join('.'));
			}
			function isFacebookApp() {
				var ua = navigator.userAgent || navigator.vendor || window.opera;
				return (ua.indexOf("FBAN") > -1) || (ua.indexOf("FBAV") > -1);
			}
			function tryOpenApp() {
				var iframe = document.createElement("iframe");
				iframe.style.border = "none";
				iframe.style.width = "1px";
				iframe.style.height = "1px";
				iframe.src = "hapaglloyd://" + window.location.hostname + window.location.pathname + window.location.search;
				var url = "hapaglloyd://" + window.location.hostname + window.location.pathname + window.location.search;
				document.body.appendChild(iframe);
				openInBrowser()
			}
			function tryOpenForTwitter() {
				var iframe = document.createElement("iframe");
				iframe.style.border = "none";
				iframe.style.width = "1px";
				iframe.style.height = "1px";
				iframe.src = "hapaglloyd://" + window.location.hostname + window.location.pathname + window.location.search;
				window.alert("hello world!")
				//document.body.appendChild(iframe);
				window.addEventListener('pagehide', function() {window.alert("window.pagehide")} );
				document.addEventListener('pagehide', function() {window.alert("document.pagehide")} );
				window.addEventListener('pageshow', function() {window.alert("window.pageshow")} );
				document.addEventListener('pageshow', function() {window.alert("document.pageshow")} );
				window.addEventListener("visibilitychange", function() {window.alert("window.visibilitychange")} );
				document.addEventListener("visibilitychange", function() {window.alert("document.visibilitychange")} );
				window.addEventListener("focus", function() {window.alert("window.focus")} );
				document.addEventListener("focus", function() {window.alert("document.focus")} );
				window.addEventListener("blur", function() {window.alert("window.blur")} );
				document.addEventListener("blur", function() {window.alert("document.blur")} );
				window.addEventListener("blur", function() {window.alert("window.blur")} );
				document.addEventListener("blur", function() {window.alert("document.blur")} );
				window.addEventListener('popstate', function() {window.alert("window.popstate")} );
				window.addEventListener('load', function() {window.alert("window.load")} );
				window.addEventListener('event', function() {window.alert("window.event")} );
				window.addEventListener("change", function() {window.alert("window.change")} );
				document.addEventListener("change", function() {window.alert("document.change")} );
				window.addEventListener("click", function() {window.alert("window.click")} );
				document.addEventListener("click", function() {window.alert("document.click")} );
				window.addEventListener("touchstart", function() {window.alert("window.touchstart")} );
				document.addEventListener("touchstart", function() {window.alert("document.touchstart")} );
				window.addEventListener("abort", function() {window.alert("window.abort")} );
				document.addEventListener("abort", function() {window.alert("document.abort")} );
				window.location.assign(iframe.src);
				//setTimeout(openInBrowser, 250);
			}
			function openInBrowser() {
				var decodedPath = decodeURIComponent(window.location.search.slice(6));
				var url = protocolToReplace + "//" + window.location.hostname + decodedPath;
				window.location.assign(url);
			}
			function onPagehide() {
				openInBrowser();
				window.removeEventListener('pagehide', onPagehide);
			}

			if (window.location.protocol == "https:") {
				protocolToReplace = "https:";
			}
			if (("standalone" in window.navigator && (iOSVersion() < 8.9)) || window.navigator.appVersion.indexOf("Win")!=-1) {
				tryOpenApp();
			} else if (isFacebookApp()) {
				tryOpenApp();
			} else {
				tryOpenForTwitter();
			}
		</script>
	</body>
</html>
